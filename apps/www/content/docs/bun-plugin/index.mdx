---
title: Introduction
icon: Album
---

## What is this?

The ArkEnv plugin for Bun lets you validate environment variables at build-time and runtime with ArkEnv.

It supports a **simple setup** for most projects, automatically discovering your schema from `./src/env.ts` or `./env.ts`.

## Usage

### Simple Setup (Recommended)

The simple setup automatically discovers your schema from `src/env.ts` or `env.ts`. This requires configuration in **both** `bunfig.toml` (for `bun serve`) and your build script (for `Bun.build`).

#### 1. Create your schema

```ts title="src/env.ts"
import { type } from "arkenv";

export default type({
  BUN_PUBLIC_API_URL: "string",
  BUN_PUBLIC_DEBUG: "boolean",
});
```

#### 2. Configure for bun serve (dev mode)

```toml title="bunfig.toml"
[serve.static]
plugins = ["@arkenv/bun-plugin"]
```

#### 3. Configure for Bun.build (build mode)

```ts title="build.ts"
import arkenv from "@arkenv/bun-plugin";

await Bun.build({
  entrypoints: ["./app.tsx"],
  outdir: "./dist",
  plugins: [arkenv], // Auto-discovers src/env.ts
});
```

### Advanced Setup

If you need to customize the schema location or prefer explicit configuration:

#### For Bun.build

Pass your schema directly to the plugin function:

```ts title="build.ts"
import arkenv from "@arkenv/bun-plugin";
import { type } from "arkenv";

const Env = type({
  BUN_PUBLIC_API_URL: "string",
  BUN_PUBLIC_DEBUG: "boolean",
});

await Bun.build({
  entrypoints: ["./app.tsx"],
  outdir: "./dist",
  plugins: [arkenv(Env)],
});
```

#### For bun serve

Create a custom plugin file and reference it in `bunfig.toml`:

```ts title="plugins/arkenv.ts"
import arkenv from "@arkenv/bun-plugin";
import { type } from "arkenv";

const Env = type({
  BUN_PUBLIC_API_URL: "string",
  BUN_PUBLIC_DEBUG: "boolean",
});

export default arkenv(Env);
```

```toml title="bunfig.toml"
[serve.static]
plugins = ["./plugins/arkenv.ts"]
```

## Features

- **Static Analysis**: Automatically replaces `process.env.VARIABLE` with validated values during the build.
- **Typesafety**: Ensures your code only accesses variables defined in your schema.
- **Secure Defaults**: Only exposes variables prefixed with `BUN_PUBLIC_` to the client bundle. You can customize this prefix by setting the `env` option in your `Bun.build()` configuration (e.g., `env: "MY_PUBLIC_*"` to use `MY_PUBLIC_` instead). See [Bun's bundler documentation](https://bun.sh/docs/bundler#env) for more details.

## Installation

```package-install
@arkenv/bun-plugin arkenv arktype
```
